(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{163:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var r=n(28),a=n(0),c=n(255),o=n(235),i=n(236),s=n(237),u=n(225),l=n(48),d=n(10),b=n(26),j=function(e){switch(e.code){case 100:return"Votre connexion semble d\xe9grad\xe9e, v\xe9rifiez-l\xe0 puis actualisez la page.";default:return e.message}},p=function(e){return function(t){console.error(e),t({type:"ERROR",message:"string"===typeof e?e:j(e)})}},f=function(e,t){return function(n){n({type:"MESSAGE",message:e,variant:t})}},m=function(e){return function(t){e.error&&p(e.message)(t)}},O=function(){return Object(b.d)("/")},h=n(7),x=n.n(h),g=n(11),v=n(19),y="my-car".toUpperCase(),C="localhost",S="https://my-app-web.heroku.app",w="http://127.0.0.1:4200",k="/login",N="/signup",E=n(22);n(47),n(166);new RegExp(/^(([^<>()[\]\\.,;:\s@]+(\.[^<>()[\]\\.,;:\s@]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);var R=n(130),A=function(e){return function(){var t=Object(g.a)(x.a.mark((function t(n,r){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:"LOADING_START"}),t.prev=1,"function"!==typeof e){t.next=7;break}return t.next=5,e(n,r);case 5:t.next=9;break;case 7:return t.next=9,e;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),p(t.t0)(n);case 14:return t.prev=14,n({type:"LOADING_END"}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e,n){return t.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return window.LOCAL?e?w:"http://".concat(C,":").concat(window.location.port):S},L=function(e){return e.name.charAt(0).toUpperCase()},B=n.n(R).a.create({baseURL:D(!0)}),T=function(){var e=$();return e?{headers:{Authorization:"Basic ".concat(e.token)}}:{}},I=function(e){return e.data},_=function(e,t){return B.get(e,t).then(I)},z=function(e,t,n){return B.post(e,t,n).then(I)},U=function(e,t,n){return B.put(e,t,n).then(I)},G=function(e,t){return B.delete(e,t).then(I)},P={getCars:function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_("api/cars"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getCar:function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_("api/cars/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createCar:function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z("api/cars",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCar:function(){var e=Object(g.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U("api/cars/".concat(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteCar:function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("api/cars/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(e,t){return z("api/cars/".concat(e,"/comment"),t,T())},M=function(e,t,n){return U("api/cars/".concat(e,"/comment/").concat(t),n,T())},V=function(e,t){return G("api/cars/".concat(e,"/comment/").concat(t),T())},q=function(e){return z("users/signup",e)},F=function(e){return z("users/login",e)},J=function(){return _("users/logout",T())},H=function(e){return U("users/profile",e,T())},Z=function(){return Object(b.d)(k)},$=function(){var e=localStorage.getItem("token-zm6Jt8h9LBq9fhGb");return e?JSON.parse(e):null},K=function(){return A(function(){var e=Object(g.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=$()||Object(v.b)(n()),delete r.token,t({type:"LOGIN_SUCCESS",user:r});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},Q=n(83),X=n(2),Y=function(e){var t=e.title;return Object(X.jsx)(Q.a,{children:Object(X.jsxs)("title",{children:[y,"-",t]})})},ee=n(228),te=n(256),ne=n(3),re=Object(u.a)((function(e){return Object(te.a)({link:{textDecoration:"underline"},leftText:{marginLeft:e.spacing(.5)},rightText:{marginRight:e.spacing(.5)}})})),ae=function(e){var t=e.textBefore,n=e.textAfter,r=e.content,a=e.href,c=e.rootClassName,o=e.className,i=e.isPreventDefault,s=e.children,u=re(),d=Object(X.jsx)(ee.a,{href:D()+a,onClick:i?function(e){return e.preventDefault()}:void 0,className:Object(ne.a)(t?u.leftText:void 0,n?u.rightText:void 0,u.link,o),children:s||r});return s?d:Object(X.jsxs)(l.a,{className:c,children:[t,d,n]})},ce=n(56),oe=n(8),ie=n(230),se=Object(u.a)((function(e){return{button:{textTransform:"inherit",fontWeight:"normal",borderRadius:4},outlined:{borderColor:"#e4e5e6"},outlinedError:{borderColor:e.palette.error.main,color:e.palette.error.main,opacity:.8,"&:hover":{opacity:1}}}})),ue=function(e){var t=e.variant,n=e.color,r=e.disabled,a=e.text,c=e.className,o=e.onClick,i=e.error,s=e.classes,u=e.startIcon,l=e.type,d=e.fullWidth,b=se();return Object(X.jsx)(ie.a,{type:l,variant:t,color:n,disabled:r,fullWidth:d,className:Object(ne.a)(c,b.button),classes:Object(oe.a)(Object(oe.a)({},s),{},{outlined:Object(ne.a)(b.outlined,i&&b.outlinedError)}),onClick:o,startIcon:u,children:a})},le=Object(u.a)((function(e){return{submitButton:{marginTop:e.spacing(2),fontSize:18}}})),de=function(e){var t=e.text,n=e.color,r=void 0===n?"primary":n,a=e.className,c=e.variant,o=void 0===c?"contained":c,i=e.fullWidth,s=void 0===i||i,u=le();return Object(X.jsx)(ue,{type:"submit",className:Object(ne.a)(a,u.submitButton),color:r,text:t,variant:o,fullWidth:s})},be=n(231),je=n(232),pe=n(254),fe=Object(u.a)((function(e){return{label:{marginBottom:e.spacing(1),fontWeight:500},asterix:{color:"red"}}})),me=function(e){var t=e.label,n=e.name,r=e.rootClassName,a=e.labelClassName,c=e.inputClassName,o=e.options,i=e.type,s=void 0===i?"text":i,u=e.errorMessage,l=e.errors,d=e.register,b=e.required,j=void 0!==b&&b,p=e.fullWidth,f=void 0===p||p,m=e.variant,O=void 0===m?"outlined":m,h=e.placeholder,x=e.defaultValue,g=fe();return Object(X.jsxs)(be.a,{margin:"normal",fullWidth:f,classes:{root:r},children:[t&&Object(X.jsxs)(je.a,{classes:{root:Object(ne.a)(a,g.label)},children:[t,j&&Object(X.jsx)("span",{className:g.asterix,children:" *"})]}),Object(X.jsx)(pe.a,Object(oe.a)({className:c,type:s,fullWidth:f,variant:O,placeholder:h,defaultValue:x},d(n,Object(oe.a)(Object(oe.a)({},o),{},{required:j})))),l[n]&&Object(X.jsx)("span",{className:g.asterix,children:u})]})},Oe=function(){var e=Object(d.d)(),t=Object(ce.a)(),n=t.register,r=t.handleSubmit,a=t.formState.errors;return Object(X.jsxs)("form",{onSubmit:r((function(t){e(function(e){return A(function(){var t=Object(g.a)(x.a.mark((function t(n,r){var a;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:return a=t.sent,m(a)(n),c=a,localStorage.setItem("token-zm6Jt8h9LBq9fhGb",JSON.stringify(c)),t.next=7,K()(n,r());case 7:n(O());case 8:case"end":return t.stop()}var c}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(t))})),children:[Object(X.jsx)(me,{register:n,errors:a,type:"email",name:"email",label:"Email",required:!0}),Object(X.jsx)(me,{register:n,errors:a,type:"password",name:"password",label:"Mot de passe",required:!0}),Object(X.jsx)(de,{text:"Connexion"})]})},he=function(){var e=Object(d.d)(),t=Object(ce.a)(),n=t.register,r=t.handleSubmit,a=t.formState.errors;return Object(X.jsxs)("form",{onSubmit:r((function(t){e(function(e){return A(function(){var t=Object(g.a)(x.a.mark((function t(n){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(e);case 2:r=t.sent,m(r)(n),n({type:"LOGOUT_SUCCESS"}),n(O()),n(f("Votre compte a \xe9t\xe9 enregisrt\xe9 avec succ\xe8s","success"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(t))})),children:[Object(X.jsx)(me,{register:n,errors:a,type:"email",name:"email",label:"Email",required:!0}),Object(X.jsx)(me,{register:n,errors:a,name:"name",label:"Nom",required:!0}),Object(X.jsx)(me,{register:n,errors:a,type:"password",name:"password",label:"Mot de passe",required:!0}),Object(X.jsx)(me,{register:n,errors:a,type:"password",name:"confirmPassword",label:"Confirmer mot de passe",required:!0}),Object(X.jsx)(de,{text:"Cr\xe9er le compte"})]})},xe=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.secondary.main,height:"100vh"},card:{minWidth:300,maxWidth:"35vw",boxShadow:"0 0 15px 0 rgba(6,48,62,0.05)",borderRadius:8,padding:"".concat(e.spacing(3),"px ").concat(e.spacing(9),"px")},button:{width:"100%"},secondaryButton:{marginTop:e.spacing(1)},actions:{composes:"flexRow"}}})),ge=function(){var e=xe(),t=Object(d.d)(),n=Object(r.e)(),u=function(e){var t=Object(r.e)();return Object(a.useMemo)((function(){return t.pathname===e}),[t])}(k),b=Object(d.e)(v.c);Object(a.useEffect)((function(){$()&&t(O())}),[t]);var j=Object(a.useMemo)((function(){var e="Cr\xe9er un compte",t=e,n=e,r=k,a="D\xe9j\xe0 un compte ?",c=Object(X.jsx)(he,{});return u&&(t="Se connecter",n="Connexion",r=N,a="Pas encore de compte ?",c=Object(X.jsx)(Oe,{})),{browserTitle:t,pageTitle:n,form:c,link:r,labelLink:a}}),[n,u]);return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Y,{title:j.browserTitle}),Object(X.jsx)(c.a,{display:"flex",justifyContent:"center",alignItems:"center",className:e.root,children:Object(X.jsx)(i.a,{className:e.card,children:Object(X.jsxs)(s.a,{children:[Object(X.jsx)(c.a,{display:"flex",justifyContent:"center",children:Object(X.jsx)(l.a,{gutterBottom:!0,variant:"h5",component:"h2",children:j.pageTitle})}),Object(X.jsxs)(c.a,{children:[b&&Object(X.jsx)(o.a,{error:!0,children:b}),j.form]}),Object(X.jsx)(c.a,{mt:5,children:Object(X.jsx)(ae,{content:j.labelLink,href:j.link})})]})})})]})},ve=n(30),ye=n(239),Ce=n(238),Se=n(91),we=n(131),ke=n.n(we),Ne=Object(u.a)({root:{minWidth:"45vw",boxShadow:"0 0 15px 0 rgba(6,48,62,0.05)"},header:{width:"100%",padding:20,borderBottom:Se.a[500],composes:"flexRow center"},content:{composes:"stretchSelf"},actions:{borderTop:Se.a[600],width:"100%",padding:"4px 10px",justifyContent:function(e){return e.actions?"flex-start":"flex-end"}},action:{marginTop:0,marginLeft:0},buttons:{composes:"flexRow flex1"},okBtn:{marginLeft:10},fullScreenContainer:{composes:"flexColumn self flex1 stretchSelf",height:"calc(100vh - 50px)"},fullScreenContent:{composes:"flex1 overflowAuto",maxHeight:"unset !important"},actionButtonLeft:{order:-1,marginRight:20,marginLeft:0}}),Ee=function(e){var t=e.elevation,n=void 0===t?3:t,r=e.rootClassName,a=e.fullScreen,o=void 0!==a&&a,u=e.title,j=e.titleClassName,p=e.content,f=e.contentClassName,m=e.okAction,O=e.okLabel,h=void 0===O?"Valider":O,x=e.actions,g=e.cancelAction,v=e.otherHeaderActionButtons,y=e.withActionButtons,C=e.actionClassName,S=e.actionButtonPosition,w=void 0===S?"right":S,k=e.cancelLabel,N=void 0===k?"Annuler":k,E=e.onHeaderPrimaryClick,R=e.headerPrimaryLabel,A=e.okBtnClassName,D=e.okBtnVariant,L=void 0===D?"contained":D,B=Ne({actions:x}),T=Object(d.d)(),I=x||Object(X.jsxs)("div",{className:B.buttons,children:[g&&Object(X.jsx)(ue,{color:"secondary",onClick:g||function(){return T(Object(b.d)("/"))},text:N}),m&&Object(X.jsx)(ue,{color:"primary",onClick:m,variant:L,classes:{root:Object(ne.a)(B.okBtn,A,w&&B.actionButtonLeft)},text:h})]});return Object(X.jsxs)(i.a,{elevation:n,classes:{root:Object(ne.a)(B.root,r,Object(ve.a)({},B.fullScreenContainer,o))},children:[Object(X.jsx)(c.a,{px:1.5,children:Object(X.jsx)(ue,{text:"Back",startIcon:Object(X.jsx)(ke.a,{})})}),u&&Object(X.jsx)(Ce.a,{title:Object(X.jsx)(l.a,{variant:"h5",children:u}),classes:{root:Object(ne.a)(B.header,j),action:B.action},action:Object(X.jsxs)(X.Fragment,{children:[E&&Object(X.jsx)(ue,{onClick:E,color:"primary",variant:"contained",text:R}),v&&v]})}),Object(X.jsx)(s.a,{classes:{root:Object(ne.a)(B.content,f,Object(ve.a)({},B.fullScreenContent,o))},children:p}),y&&Object(X.jsx)(ye.a,{classes:{root:Object(ne.a)(B.actions,C)},children:I})]})},Re=Object(u.a)((function(e){return Object(te.a)({input:{backgroundColor:Se.a[200],borderRadius:25,"& input:valid:focus":{borderRadius:25,backgroundColor:Se.a[300]},"& input::placeholder":{color:Se.a[900],fontSize:14},"& input:valid + fieldset":{borderRadius:25,borderWidth:0,color:"blue"},"& input:valid:focus + fieldset":{border:"none",padding:"4px !important"}},form:{flex:1}})})),Ae=function(e){var t=e.onSave,n=e.className,r=e.user,a=Re(),o=Object(ce.a)(),i=o.register,s=o.handleSubmit,u=o.reset,l=o.formState.errors;return Object(X.jsx)(c.a,{display:"flex",alignItems:"center",className:n,children:Object(X.jsxs)("form",{onSubmit:s((function(e){t(e),u(e)})),className:a.form,children:[Object(X.jsx)(me,{register:i,errors:l,label:"Mon nom",name:"name",rootClassName:a.input,defaultValue:r.name}),Object(X.jsx)(me,{register:i,errors:l,label:"Mon email",name:"email",type:"email",rootClassName:a.input,defaultValue:r.email}),Object(X.jsx)(de,{text:"Enregistrer"})]})})},De=function(){var e=Object(d.e)(v.b),t=Object(d.d)();return Object(X.jsx)(c.a,{display:"flex",justifyContent:"center",children:Object(X.jsx)(Ee,{content:Object(X.jsx)(Ae,{user:e,onSave:function(e){t(function(e){return A(function(){var t=Object(g.a)(x.a.mark((function t(n){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(e);case 2:r=t.sent,m(r)(n),n({type:"LOGIN_SUCCESS",user:r}),n(O()),n(f("Votre profile a \xe9t\xe9 mis \xe0 jour avec succ\xe8s","success"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(e))}})})})},Le=n(20),Be=n(35),Te=function(){return A(function(){var e=Object(g.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getCars();case 2:return(n=e.sent)&&Array.isArray(n)&&t({type:"CARS_LOADED",cars:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ie=function(){return function(e){var t=e.getData,n=e.loadData,r=Object(d.d)(),c=Object(d.e)(t);return Object(a.useEffect)((function(){r(n())}),[r]),c}({getData:Be.c,loadData:Te})},_e=n(245),ze=function(e,t,n){return function(){var r=Object(g.a)(x.a.mark((function r(a){var c;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,M(e.id,t,n);case 2:c=r.sent,m(c)(a),a({type:"CAR_UPDATED",car:e});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ue=function(e,t){return function(){var n=Object(g.a)(x.a.mark((function n(r,a){var c,o;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Object(Be.c)(a()),o=c.filter((function(t){return t!==e})),n.next=4,V(e.id,t);case 4:r({type:"CARS_UPDATED",cars:o});case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Ge=n(243),Pe=n(244),We=n(234),Me=Object(u.a)(Object(te.a)({root:{backgroundColor:"#BDBDBD",borderRadius:"50%",color:"#fff",width:function(e){return e.size},height:function(e){return e.size},textTransform:"uppercase",fontFamily:"sans-serif",fontSize:function(e){return e.fontSize}}})),Ve=function(e){var t=e.content,n=e.className,r=e.size,a=void 0===r?40:r,o=e.fontSize,i=Me({size:a,fontSize:void 0===o?18:o});return Object(X.jsx)(c.a,{className:Object(ne.a)(i.root,n),display:"flex",justifyContent:"center",alignItems:"center",children:t})},qe=Object(u.a)((function(e){return Object(te.a)({input:{backgroundColor:Se.a[200],borderRadius:25,"& input:valid:focus":{borderRadius:25,backgroundColor:Se.a[300]},"& input::placeholder":{color:Se.a[900],fontSize:14},"& input:valid + fieldset":{borderRadius:25,borderWidth:0,color:"blue"},"& input:valid:focus + fieldset":{border:"none",padding:"4px !important"}},form:{flex:1},button:{display:"none"},avatar:{height:55,width:55,marginTop:5,marginRight:e.spacing(2)}})})),Fe=function(e){var t=e.onSave,n=e.defaultValue,r=e.className,a=e.user,o=qe(),i=Object(ce.a)(),s=i.register,u=i.handleSubmit,l=i.reset,d=i.formState.errors;return Object(X.jsxs)(c.a,{display:"flex",alignItems:"center",className:r,children:[Object(X.jsx)(Ve,{content:L(a),className:o.avatar}),Object(X.jsxs)("form",{onSubmit:u((function(e){t(e),l(e)})),className:o.form,children:[Object(X.jsx)(me,{register:s,errors:d,name:"text",rootClassName:o.input,defaultValue:n,placeholder:"Ecrivez un commentaire..."}),Object(X.jsx)("input",{type:"submit",className:o.button})]})]})},Je=Object(u.a)((function(e){return Object(te.a)({button:{textTransform:"initial",fontWeight:400,color:e.palette.primary.main,padding:0,"&:hover":{backgroundColor:"transparent",opacity:.9}},firstButton:{marginRight:e.spacing(1)},form:{paddingLeft:e.spacing(8.8)}})})),He=function(e){var t=e.comment,n=e.car,r=Je(),o=Object(a.useState)(!1),i=Object(E.a)(o,2),s=i[0],u=i[1],l=Object(d.d)(),b=Object(d.f)(),j=Object(a.useCallback)((function(){return u((function(e){return!e}))}),[u]),p=Object(a.useCallback)((function(e){Ue(n,e)(l,b.getState)}),[n,b,l]),f=Object(a.useCallback)((function(e){ze(n,t._id,e)(l),j()}),[t,j]);return Object(X.jsxs)(c.a,{mt:-3,mb:1,children:[Object(X.jsxs)(c.a,{display:"flex",justifyContent:"flex-end",children:[Object(X.jsx)(ie.a,{onClick:function(){return p(t._id)},className:Object(ne.a)(r.button,r.firstButton),children:"Supprimer"}),Object(X.jsx)(ie.a,{onClick:j,className:r.button,children:"Modifier"})]}),s&&Object(X.jsx)(Fe,{onSave:f,defaultValue:t.text,className:r.form,user:t.postedBy})]})},Ze=n(240),$e=n(241),Ke=n(242),Qe=Object(u.a)(Object(te.a)({inline:{display:"inline"}})),Xe=function(e){var t=e.comment,n=Qe();return Object(X.jsxs)(Ze.a,{alignItems:"flex-start",children:[Object(X.jsx)($e.a,{children:Object(X.jsx)(Ve,{content:L(t.postedBy)})}),Object(X.jsx)(Ke.a,{primary:Object(X.jsxs)(c.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(X.jsx)(l.a,{variant:"subtitle1",className:n.inline,color:"textPrimary",children:t.postedBy.name}),Object(X.jsx)(l.a,{component:"span",variant:"body2",className:n.inline,color:"textPrimary",children:t.updatedAt})]}),secondary:t.text})]},t._id)},Ye=function(){return Object(X.jsx)(c.a,{pl:1,children:Object(X.jsx)(ae,{content:"Connectez-vous",textAfter:"pour pouvoir commenter cet article",href:"/login"})})},et=Object(u.a)((function(e){return Object(te.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,paddingBottom:0,paddingTop:e.spacing(1),borderTop:"1px solid "+Se.a[300]},button:{textTransform:"initial",fontWeight:400,color:e.palette.primary.main,padding:0,"&:hover":{backgroundColor:"transparent",opacity:.9}},firstButton:{marginRight:e.spacing(1)}})})),tt=function(e){var t=e.comments,n=e.onAdd,r=e.car,c=et(),o=Object(d.e)(v.b);return Object(X.jsxs)(We.a,{className:c.root,subheader:Object(X.jsxs)(Ge.a,{component:"div",id:"nested-list-subheader",children:["Commentaires (",(null===t||void 0===t?void 0:t.length)||0,")"]}),children:[o?Object(X.jsx)(Fe,{onSave:n,user:o}):Object(X.jsx)(Ye,{}),t&&t.length>0&&t.map((function(e,n){return Object(X.jsxs)(a.Fragment,{children:[Object(X.jsx)(Xe,{comment:e}),(null===o||void 0===o?void 0:o.id)===e.postedBy.id&&Object(X.jsx)(He,{comment:e,car:r}),t.length-1!==n&&Object(X.jsx)(Pe.a,{variant:"inset",component:"li"})]},e._id)}))]})},nt=Object(u.a)((function(e){return{root:{width:600,borderRadius:10},media:{height:260},comment:{borderRadius:6},tag:{paddingLeft:e.spacing(5),borderColor:Se.a[500]}}})),rt=function(e){var t=e.car,n=e.className,r=nt(),o=Object(a.useState)(!1),u=Object(E.a)(o,2),b=u[0],j=u[1],p=Object(d.d)();return Object(X.jsxs)(i.a,{className:Object(ne.a)(r.root,n),children:[Object(X.jsx)(_e.a,{className:r.media,image:t.image,title:"Contemplative Reptile"}),Object(X.jsxs)(s.a,{style:{paddingBottom:10},children:[Object(X.jsxs)(c.a,{display:"flex",justifyContent:"space-between",children:[Object(X.jsxs)(c.a,{children:[Object(X.jsx)(l.a,{gutterBottom:!0,variant:"h6",component:"h6",children:t.name}),Object(X.jsx)(l.a,{variant:"body2",color:"textSecondary",component:"p",children:t.shortDesc})]}),Object(X.jsx)(c.a,{className:r.comment,display:"flex",alignItems:"flex-start",children:Object(X.jsxs)(ie.a,{size:"small",color:"primary",onClick:function(){return j((function(e){return!e}))},children:["Commentaires (",t.comments?t.comments.length:0,")"]})})]}),Object(X.jsx)(c.a,{display:"flex",justifyContent:"space-between",mt:2,children:[t.year,t.distance,t.fuel,t.gearbox].map((function(e,t){return Object(X.jsx)(c.a,{borderLeft:0!==t?1:0,className:0!==t?r.tag:void 0,children:Object(X.jsx)(l.a,{children:e})},t)}))})]}),b&&Object(X.jsx)(ye.a,{children:Object(X.jsx)(tt,{car:t,comments:t.comments,onAdd:function(e){p(function(e,t){return A(function(){var n=Object(g.a)(x.a.mark((function n(r,a){var c,o;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Object(Be.c)(a()),n.next=3,W(e,t);case 3:o=n.sent,r({type:"CAR_LOADED",car:o}),r({type:"CARS_UPDATED",cars:[o].concat(Object(Le.a)(c))});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}(t.id,e))}})})]})},at=Object(u.a)((function(e){return{cars:{margin:-e.spacing(10)},car:{margin:e.spacing(10)}}})),ct=function(){var e=at(),t=Ie();return Object(X.jsx)(c.a,{children:Object(X.jsx)(c.a,{className:e.cars,children:t.map((function(t,n){return Object(X.jsx)(rt,{car:t,className:e.car},n)}))})})},ot=function(){return Object(X.jsx)(c.a,{display:"flex",justifyContent:"center",children:Object(X.jsx)(ct,{})})},it=function(){var e=Object(d.f)();return Object(a.useEffect)((function(){(function(){var t=Object(g.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A(function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:n=e.sent,m(n)(t),t({type:"LOGOUT_SUCCESS"}),localStorage.removeItem("token-zm6Jt8h9LBq9fhGb"),t(Z());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())(e.dispatch,e.getState);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),null},st=n(90),ut=n(261),lt=n(252),dt=n(260),bt=n(246),jt=n(247),pt=n(248),ft=n(259),mt=n(18),Ot=n(249),ht=n(133),xt=n.n(ht),gt=n(132),vt=n.n(gt),yt=Object(u.a)((function(e){return Object(te.a)({root:{composes:"stretchSelf"},appBar:{backgroundColor:"#fff",color:"#000",paddingTop:e.spacing(.8),paddingBottom:e.spacing(.8),boxShadow:"0 12px 24px 0 rgb(0 0 0 / 8%)"},logoContainer:Object(ve.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),logo:{textDecoration:"none"},search:Object(ve.a)({position:"relative",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),borderRadius:e.shape.borderRadius,backgroundColor:Object(mt.c)(e.palette.secondary.main,1),"&:hover":{backgroundColor:Object(mt.c)(e.palette.secondary.main,.75)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",top:-1.6},inputRoot:{color:"inherit"},inputInput:Object(ve.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"18ch","&:focus":{width:"24ch"}}),loginButton:{color:"#fff",textDecoration:"none",backgroundColor:e.palette.primary.main,fontSize:16,padding:"".concat(e.spacing(1.2),"px ").concat(e.spacing(2.5),"px"),marginLeft:e.spacing(4),marginRight:e.spacing(2),borderRadius:8,"&:hover":{color:e.palette.primary.main,backgroundColor:"#fff"}},avatarLink:{textDecoration:"none","&:hover":{textDecoration:"none"}},avatar:{marginLeft:e.spacing(3),"&:hover":{opactity:.8}}})})),Ct=function(){var e=yt(),t=Object(d.d)(),n=Object(bt.a)(),r=Object(d.e)(v.b);return Object(X.jsx)("div",{className:e.root,children:Object(X.jsx)(jt.a,{appear:!1,direction:"down",in:!n,children:Object(X.jsx)(pt.a,{className:e.appBar,children:Object(X.jsxs)(Ot.a,{children:[Object(X.jsx)(ae,{content:"My Car",href:"/",className:e.logo,rootClassName:e.logoContainer}),Object(X.jsxs)("div",{className:e.search,children:[Object(X.jsx)("div",{className:e.searchIcon,children:Object(X.jsx)(vt.a,{})}),Object(X.jsx)(ft.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})]}),r?Object(X.jsx)(ae,{href:"/logout",className:e.avatarLink,children:Object(X.jsx)(Ve,{content:L(r),className:e.avatar,size:35})}):Object(X.jsx)(ue,{onClick:function(){t(Z())},text:"Connexion",className:e.loginButton,startIcon:Object(X.jsx)(xt.a,{})})]})})})})},St=n(251),wt=n(250),kt=n(134),Nt=n.n(kt),Et=n(138),Rt=n.n(Et),At=n(136),Dt=n.n(At),Lt=n(137),Bt=n.n(Lt),Tt=n(135),It=n.n(Tt),_t=Object(u.a)({success:{backgroundColor:"#1FA086"},error:{backgroundColor:"#fd6664"},info:{backgroundColor:"#00bcd4"},warning:{backgroundColor:"#d17d1d"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:20},message:{display:"flex",alignItems:"center"}}),zt={success:Nt.a,warning:It.a,error:Dt.a,info:Bt.a},Ut=function(e){var t=e.className,n=e.onClose,r=e.variant,a=e.message,c=Object(st.a)(e,["className","onClose","variant","message"]),o=_t(),i=zt[r];return Object(X.jsx)(wt.a,Object(oe.a)({className:Object(ne.a)(o[r],t),"aria-describedby":"client-snackbar",message:Object(X.jsxs)("span",{id:"client-snackbar",className:o.message,children:[Object(X.jsx)(i,{className:Object(ne.a)(o.icon,o.iconVariant)}),a]}),action:n?[Object(X.jsx)(St.a,{"aria-label":"Close",color:"inherit",onClick:n,children:Object(X.jsx)(Rt.a,{className:o.icon})},"close")]:void 0},c))},Gt=Object(u.a)((function(e){return{main:{composes:"flexColumn"},children:{composes:"flexCenter flex1",padding:12},backdrop:{zIndex:10*e.zIndex.drawer,color:"#fff"},menuButton:{"&:hover":{backgroundColor:"transparent"}},content:{composes:"flexRow center flexCenter flex1 stretchSelf",backgroundColor:e.palette.secondary.main,paddingTop:e.spacing(8),marginTop:77,flexGrow:1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}})),Pt=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(E.a)(n,2),c=r[0],o=r[1],i=Gt(),s=Object(d.d)(),u=Object(d.e)(v.g),l=Object(d.e)(v.e),b=Object(d.e)(v.f),j=Object(d.e)(v.d);return Object(a.useEffect)((function(){return setTimeout((function(){o(j)}),200),function(){o(!1)}}),[j]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Y,{title:u||y}),Object(X.jsxs)("main",{className:i.main,children:[Object(X.jsx)(Ct,{}),Object(X.jsx)("div",{className:i.content,children:t})]}),Object(X.jsx)(dt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:null!=l,autoHideDuration:4e3,onClose:function(){return s({type:"CLOSE_MESSAGE"})},children:Object(X.jsx)(Ut,{variant:b,message:l||""})}),Object(X.jsx)(ut.a,{className:i.backdrop,open:c,onClick:function(){o(!1)},children:Object(X.jsx)(lt.a,{color:"inherit"})})]})},Wt=function(e){var t=e.component,n=Object(st.a)(e,["component"]);return function(){var e=Object(d.f)(),t=Object(d.e)(v.b);Object(a.useEffect)((function(){var n=$();!t&&n&&K()(e.dispatch,e.getState)}),[e,$])}(),Object(X.jsx)(r.a,Object(oe.a)(Object(oe.a)({},n),{},{children:Object(X.jsx)(Pt,{children:Object(X.jsx)(t,{})})}))};t.default=function(){return Object(X.jsxs)(r.c,{children:[Object(X.jsx)(Wt,{path:"/",component:ot,exact:!0}),Object(X.jsx)(Wt,{path:"/profil",component:De}),Object(X.jsx)(r.a,{path:k,exact:!0,children:Object(X.jsx)(ge,{})}),Object(X.jsx)(r.a,{path:N,exact:!0,children:Object(X.jsx)(ge,{})}),Object(X.jsx)(r.a,{path:"/logout",component:it})]})}},189:function(e,t,n){"use strict";n.r(t);var r=n(227),a=n(257),c=n(253),o=n(45),i=n(17),s=n(140),u=n(14),l=n.n(u),d=n(83),b=n(10),j=n(27),p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},f=n(111),m=n(67),O=n(126),h=n(127),x=[Object(f.a)(j.c),h.a],g=[m.applyMiddleware.apply(void 0,x)],v=O.composeWithDevTools.apply(void 0,g),y=Object(m.createStore)(j.a,{},v);var C=n(92),S=n(139),w=Object(S.a)({palette:{primary:{main:C.a[600]},secondary:{main:"#ECECEC"},error:{main:"#ff485e"}}}),k=(n(163),n(2));!function(){var e=window.location.hostname;window.LOCAL=-1===e.indexOf("my-car");var t=n(187).default,u=document.getElementById("root"),p=Object(i.b)(Object(s.a)()),f=Object(r.a)();u&&l.a.render(Object(k.jsx)(b.a,{store:y,children:Object(k.jsx)(d.b,{children:Object(k.jsx)(a.b,{jss:p,generateClassName:f,children:Object(k.jsx)(c.a,{theme:w,children:Object(k.jsx)(o.a,{history:j.c,children:Object(k.jsx)(t,{})})})})})}),document.getElementById("root"))}(),p()},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return d}));var r=n(8),a=n(27),c={user:null,loading:!1,error:null,variant:null,message:null,title:null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.user",t&&"No current user in app")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.error",t&&"No error in app")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.message",t&&"No message in app")},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.loading",t&&"No action with loader in app")},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.title",t&&"No title in app")},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.variant",t&&"No message in app")};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_START":return Object(r.a)(Object(r.a)({},e),{},{loading:!0});case"LOADING_END":return Object(r.a)(Object(r.a)({},e),{},{loading:!1});case"LOGIN_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{user:t.user});case"LOGOUT_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{user:null});case"ERROR":return Object(r.a)(Object(r.a)({},e),{},{error:t.message});case"CLOSE_ERROR":return Object(r.a)(Object(r.a)({},e),{},{error:null});case"MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{message:t.message,variant:t.variant||"info"});case"CLOSE_MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{message:null});default:return e}}},27:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f}));var r,a=n(8),c=n(45),o=n(44),i=n(67),s=n(19),u=n(35),l={user:null,users:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADED":return Object(a.a)(Object(a.a)({},e),{},{user:t.user});case"REMOVE_USER":return Object(a.a)(Object(a.a)({},e),{},{user:null});case"USER_UPDATED":return Object(a.a)(Object(a.a)({},e),{},{user:t.user});case"USERS_LOADED":case"USERS_UPDATED":return Object(a.a)(Object(a.a)({},e),{},{users:t.users});default:return e}},b=Object(o.a)(),j={app:s.a,cars:u.a,users:d},p=(r=b,Object(i.combineReducers)(Object(a.a)(Object(a.a)({},j),{},{router:Object(c.b)(r)}))),f=(t.a=p,function(e,t,n){var r;try{if("function"===typeof e)throw new Error("The state parameter must not be a function. The error is usually the usage of getState instead of getState(). Path is");if(r=t.split(".").reduce((function(e,t){return e[t]}),e),n&&null==r)throw new Error(n)}catch(a){return console.error(a),null}return r})},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=n(8),a=n(27),c={car:null,cars:[],count:null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"cars.car",t&&"No car data found")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"cars.cars",t&&"No cars data found")};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAR_LOADED":return Object(r.a)(Object(r.a)({},e),{},{car:t.car});case"REMOVE_CAR":return Object(r.a)(Object(r.a)({},e),{},{car:null});case"CAR_UPDATED":return Object(r.a)(Object(r.a)({},e),{},{car:t.car});case"CARS_LOADED":return Object(r.a)(Object(r.a)({},e),{},{cars:t.cars,count:t.count});case"CARS_UPDATED":return Object(r.a)(Object(r.a)({},e),{},{cars:t.cars});default:return e}}}},[[189,1,2]]]);
//# sourceMappingURL=main.494b71dd.chunk.js.map