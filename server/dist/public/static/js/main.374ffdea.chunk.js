(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{163:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var r,a=n(28),c=n(0),o=n(255),i=n(235),s=n(236),u=n(237),l=n(225),d=n(48),b=n(10),j=n(26),p=function(e){switch(e.code){case 100:return"Votre connexion semble d\xe9grad\xe9e, v\xe9rifiez-l\xe0 puis actualisez la page.";default:return e.message}},f=function(e){return function(t){console.error(e),t({type:"ERROR",message:"string"===typeof e?e:p(e)})}},m=function(e,t){return function(n){n({type:"MESSAGE",message:e,variant:t})}},O=function(e){return function(t){e.error&&f(e.message)(t)}},h=function(){return Object(j.d)("/")},x=n(7),g=n.n(x),v=n(11),y=n(19);!function(e){e.admin="ADMINISTRATOR",e.user="USER"}(r||(r={}));var C="my-car".toUpperCase(),S="localhost",w="https://my-car-web.herokuapp.com",N="http://127.0.0.1:4200",k="/login",E="/signup",R=n(22),A=n(44),D=n.n(A);n(166);new RegExp(/^(([^<>()[\]\\.,;:\s@]+(\.[^<>()[\]\\.,;:\s@]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);var L=n(130),T=function(e){return function(){var t=Object(v.a)(g.a.mark((function t(n,r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:"LOADING_START"}),t.prev=1,"function"!==typeof e){t.next=7;break}return t.next=5,e(n,r);case 5:t.next=9;break;case 7:return t.next=9,e;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),f(t.t0)(n);case 14:return t.prev=14,n({type:"LOADING_END"}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e,n){return t.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return window.LOCAL?e?N:"http://".concat(S,":").concat(window.location.port):w},I=function(e){return e.name.charAt(0).toUpperCase()},_=n.n(L).a.create({baseURL:B(!0)}),z=function(){var e=X();return e?{headers:{Authorization:"Basic ".concat(e.token)}}:{}},U=function(e){return e.data},G=function(e,t){return _.get(e,t).then(U)},P=function(e,t,n){return _.post(e,t,n).then(U)},M=function(e,t,n){return _.put(e,t,n).then(U)},W=function(e,t){return _.delete(e,t).then(U)},V={getCars:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("api/cars"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getCar:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("api/cars/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createCar:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P("api/cars",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCar:function(){var e=Object(v.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M("api/cars/".concat(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteCar:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W("api/cars/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q=function(e,t){return P("api/cars/".concat(e,"/comment"),t,z())},F=function(e,t,n){return M("api/cars/".concat(e,"/comment/").concat(t),n,z())},J=function(e,t){return W("api/cars/".concat(e,"/comment/").concat(t),z())},H=function(e){return P("users/signup",e)},Z=function(e){return P("users/login",e)},$=function(){return G("users/logout",z())},K=function(e){return M("users/profile",e,z())},Q=function(){return Object(j.d)(k)},X=function(){var e=localStorage.getItem("token-zm6Jt8h9LBq9fhGb");return e?JSON.parse(e):null},Y=function(){return T(function(){var e=Object(v.a)(g.a.mark((function e(t,n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=X()||Object(y.b)(n()),delete r.token,t({type:"LOGIN_SUCCESS",user:r});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},ee=n(83),te=n(2),ne=function(e){var t=e.title;return Object(te.jsx)(ee.a,{children:Object(te.jsxs)("title",{children:[C,"-",t]})})},re=n(228),ae=n(256),ce=n(3),oe=Object(l.a)((function(e){return Object(ae.a)({link:{textDecoration:"underline"},leftText:{marginLeft:e.spacing(.5)},rightText:{marginRight:e.spacing(.5)}})})),ie=function(e){var t=e.textBefore,n=e.textAfter,r=e.content,a=e.href,c=e.rootClassName,o=e.className,i=e.isPreventDefault,s=e.children,u=oe(),l=Object(te.jsx)(re.a,{href:B()+a,onClick:i?function(e){return e.preventDefault()}:void 0,className:Object(ce.a)(t?u.leftText:void 0,n?u.rightText:void 0,u.link,o),children:s||r});return s?l:Object(te.jsxs)(d.a,{className:c,children:[t,l,n]})},se=n(56),ue=n(8),le=n(230),de=Object(l.a)((function(e){return{button:{textTransform:"inherit",fontWeight:"normal",borderRadius:4},outlined:{borderColor:"#e4e5e6"},outlinedError:{borderColor:e.palette.error.main,color:e.palette.error.main,opacity:.8,"&:hover":{opacity:1}}}})),be=function(e){var t=e.variant,n=e.color,r=e.disabled,a=e.text,c=e.className,o=e.onClick,i=e.error,s=e.classes,u=e.startIcon,l=e.type,d=e.fullWidth,b=de();return Object(te.jsx)(le.a,{type:l,variant:t,color:n,disabled:r,fullWidth:d,className:Object(ce.a)(c,b.button),classes:Object(ue.a)(Object(ue.a)({},s),{},{outlined:Object(ce.a)(b.outlined,i&&b.outlinedError)}),onClick:o,startIcon:u,children:a})},je=Object(l.a)((function(e){return{submitButton:{marginTop:e.spacing(2),fontSize:18}}})),pe=function(e){var t=e.text,n=e.color,r=void 0===n?"primary":n,a=e.className,c=e.variant,o=void 0===c?"contained":c,i=e.fullWidth,s=void 0===i||i,u=je();return Object(te.jsx)(be,{type:"submit",className:Object(ce.a)(a,u.submitButton),color:r,text:t,variant:o,fullWidth:s})},fe=n(231),me=n(232),Oe=n(254),he=Object(l.a)((function(e){return{label:{marginBottom:e.spacing(1),fontWeight:500},asterix:{color:"red"}}})),xe=function(e){var t=e.label,n=e.name,r=e.rootClassName,a=e.labelClassName,c=e.inputClassName,o=e.options,i=e.type,s=void 0===i?"text":i,u=e.errorMessage,l=e.errors,d=e.register,b=e.required,j=void 0!==b&&b,p=e.fullWidth,f=void 0===p||p,m=e.variant,O=void 0===m?"outlined":m,h=e.placeholder,x=e.defaultValue,g=he();return Object(te.jsxs)(fe.a,{margin:"normal",fullWidth:f,classes:{root:r},children:[t&&Object(te.jsxs)(me.a,{classes:{root:Object(ce.a)(a,g.label)},children:[t,j&&Object(te.jsx)("span",{className:g.asterix,children:" *"})]}),Object(te.jsx)(Oe.a,Object(ue.a)({className:c,type:s,fullWidth:f,variant:O,placeholder:h,defaultValue:x},d(n,Object(ue.a)(Object(ue.a)({},o),{},{required:j})))),l[n]&&Object(te.jsx)("span",{className:g.asterix,children:u})]})},ge=function(){var e=Object(b.d)(),t=Object(se.a)(),n=t.register,r=t.handleSubmit,a=t.formState.errors;return Object(te.jsxs)("form",{onSubmit:r((function(t){e(function(e){return T(function(){var t=Object(v.a)(g.a.mark((function t(n,r){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e);case 2:return a=t.sent,O(a)(n),c=a,localStorage.setItem("token-zm6Jt8h9LBq9fhGb",JSON.stringify(c)),t.next=7,Y()(n,r());case 7:n(h());case 8:case"end":return t.stop()}var c}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(t))})),children:[Object(te.jsx)(xe,{register:n,errors:a,type:"email",name:"email",label:"Email",required:!0}),Object(te.jsx)(xe,{register:n,errors:a,type:"password",name:"password",label:"Mot de passe",required:!0}),Object(te.jsx)(pe,{text:"Connexion"})]})},ve=function(){var e=Object(b.d)(),t=Object(se.a)(),n=t.register,r=t.handleSubmit,a=t.formState.errors;return Object(te.jsxs)("form",{onSubmit:r((function(t){e(function(e){return T(function(){var t=Object(v.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(e);case 2:r=t.sent,O(r)(n),n({type:"LOGOUT_SUCCESS"}),n(h()),n(m("Votre compte a \xe9t\xe9 enregisrt\xe9 avec succ\xe8s","success"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(t))})),children:[Object(te.jsx)(xe,{register:n,errors:a,type:"email",name:"email",label:"Email",required:!0}),Object(te.jsx)(xe,{register:n,errors:a,name:"name",label:"Nom",required:!0}),Object(te.jsx)(xe,{register:n,errors:a,type:"password",name:"password",label:"Mot de passe",required:!0}),Object(te.jsx)(xe,{register:n,errors:a,type:"password",name:"confirmPassword",label:"Confirmer mot de passe",required:!0}),Object(te.jsx)(pe,{text:"Cr\xe9er le compte"})]})},ye=Object(l.a)((function(e){return{root:{backgroundColor:e.palette.secondary.main,height:"100vh"},card:{minWidth:300,maxWidth:"35vw",boxShadow:"0 0 15px 0 rgba(6,48,62,0.05)",borderRadius:8,padding:"".concat(e.spacing(3),"px ").concat(e.spacing(9),"px")},button:{width:"100%"},secondaryButton:{marginTop:e.spacing(1)},actions:{composes:"flexRow"}}})),Ce=function(){var e=ye(),t=Object(b.d)(),n=Object(a.e)(),r=function(e){var t=Object(a.e)();return Object(c.useMemo)((function(){return t.pathname===e}),[t])}(k),l=Object(b.e)(y.c);Object(c.useEffect)((function(){X()&&t(h())}),[t]);var j=Object(c.useMemo)((function(){var e="Cr\xe9er un compte",t=e,n=e,a=k,c="D\xe9j\xe0 un compte ?",o=Object(te.jsx)(ve,{});return r&&(t="Se connecter",n="Connexion",a=E,c="Pas encore de compte ?",o=Object(te.jsx)(ge,{})),{browserTitle:t,pageTitle:n,form:o,link:a,labelLink:c}}),[n,r]);return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ne,{title:j.browserTitle}),Object(te.jsx)(o.a,{display:"flex",justifyContent:"center",alignItems:"center",className:e.root,children:Object(te.jsx)(s.a,{className:e.card,children:Object(te.jsxs)(u.a,{children:[Object(te.jsx)(o.a,{display:"flex",justifyContent:"center",children:Object(te.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"h2",children:j.pageTitle})}),Object(te.jsxs)(o.a,{children:[l&&Object(te.jsx)(i.a,{error:!0,children:l}),j.form]}),Object(te.jsx)(o.a,{mt:5,children:Object(te.jsx)(ie,{content:j.labelLink,href:j.link})})]})})})]})},Se=n(30),we=n(239),Ne=n(238),ke=n(91),Ee=n(131),Re=n.n(Ee),Ae=Object(l.a)({root:{minWidth:"45vw",boxShadow:"0 0 15px 0 rgba(6,48,62,0.05)"},header:{width:"100%",padding:20,borderBottom:ke.a[500],composes:"flexRow center"},content:{composes:"stretchSelf"},actions:{borderTop:ke.a[600],width:"100%",padding:"4px 10px",justifyContent:function(e){return e.actions?"flex-start":"flex-end"}},action:{marginTop:0,marginLeft:0},buttons:{composes:"flexRow flex1"},okBtn:{marginLeft:10},fullScreenContainer:{composes:"flexColumn self flex1 stretchSelf",height:"calc(100vh - 50px)"},fullScreenContent:{composes:"flex1 overflowAuto",maxHeight:"unset !important"},actionButtonLeft:{order:-1,marginRight:20,marginLeft:0}}),De=function(e){var t=e.elevation,n=void 0===t?3:t,r=e.rootClassName,a=e.fullScreen,c=void 0!==a&&a,i=e.title,l=e.titleClassName,p=e.content,f=e.contentClassName,m=e.okAction,O=e.okLabel,h=void 0===O?"Valider":O,x=e.actions,g=e.cancelAction,v=e.otherHeaderActionButtons,y=e.withActionButtons,C=e.actionClassName,S=e.actionButtonPosition,w=void 0===S?"right":S,N=e.cancelLabel,k=void 0===N?"Annuler":N,E=e.onHeaderPrimaryClick,R=e.headerPrimaryLabel,A=e.okBtnClassName,D=e.okBtnVariant,L=void 0===D?"contained":D,T=Ae({actions:x}),B=Object(b.d)(),I=x||Object(te.jsxs)("div",{className:T.buttons,children:[g&&Object(te.jsx)(be,{color:"secondary",onClick:g||function(){return B(Object(j.d)("/"))},text:k}),m&&Object(te.jsx)(be,{color:"primary",onClick:m,variant:L,classes:{root:Object(ce.a)(T.okBtn,A,w&&T.actionButtonLeft)},text:h})]});return Object(te.jsxs)(s.a,{elevation:n,classes:{root:Object(ce.a)(T.root,r,Object(Se.a)({},T.fullScreenContainer,c))},children:[Object(te.jsx)(o.a,{px:1.5,children:Object(te.jsx)(be,{text:"Back",startIcon:Object(te.jsx)(Re.a,{})})}),i&&Object(te.jsx)(Ne.a,{title:Object(te.jsx)(d.a,{variant:"h5",children:i}),classes:{root:Object(ce.a)(T.header,l),action:T.action},action:Object(te.jsxs)(te.Fragment,{children:[E&&Object(te.jsx)(be,{onClick:E,color:"primary",variant:"contained",text:R}),v&&v]})}),Object(te.jsx)(u.a,{classes:{root:Object(ce.a)(T.content,f,Object(Se.a)({},T.fullScreenContent,c))},children:p}),y&&Object(te.jsx)(we.a,{classes:{root:Object(ce.a)(T.actions,C)},children:I})]})},Le=Object(l.a)({input:{backgroundColor:ke.a[200],borderRadius:25,"& input:valid:focus":{borderRadius:25,backgroundColor:ke.a[300]},"& input::placeholder":{color:ke.a[900],fontSize:14},"& input:valid + fieldset":{borderRadius:25,borderWidth:0,color:"blue"},"& input:valid:focus + fieldset":{border:"none",padding:"4px !important"}},form:{flex:1}}),Te=function(e){var t=e.onSave,n=e.className,r=e.user,a=Le(),c=Object(se.a)(),i=c.register,s=c.handleSubmit,u=c.reset,l=c.formState.errors;return Object(te.jsx)(o.a,{display:"flex",alignItems:"center",className:n,children:Object(te.jsxs)("form",{onSubmit:s((function(e){t(e),u(e)})),className:a.form,children:[Object(te.jsx)(xe,{register:i,errors:l,label:"Mon nom",name:"name",rootClassName:a.input,defaultValue:r.name}),Object(te.jsx)(xe,{register:i,errors:l,label:"Mon email",name:"email",type:"email",rootClassName:a.input,defaultValue:r.email}),Object(te.jsx)(pe,{text:"Enregistrer"})]})})},Be=function(){var e=Object(b.e)(y.b),t=Object(b.d)();return Object(te.jsx)(o.a,{display:"flex",justifyContent:"center",children:Object(te.jsx)(De,{content:Object(te.jsx)(Te,{user:e,onSave:function(e){t(function(e){return T(function(){var t=Object(v.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:r=t.sent,O(r)(n),n({type:"LOGIN_SUCCESS",user:r}),n(h()),n(m("Votre profile a \xe9t\xe9 mis \xe0 jour avec succ\xe8s","success"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(e))}})})})},Ie=n(20),_e=n(35),ze=function(){return T(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.getCars();case 2:return(n=e.sent)&&Array.isArray(n)&&t({type:"CARS_LOADED",cars:n}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ue=function(){return function(e){var t=e.getData,n=e.loadData,r=Object(b.d)(),a=Object(b.e)(t);return Object(c.useEffect)((function(){r(n())}),[r]),a}({getData:_e.c,loadData:ze})},Ge=n(245),Pe=function(e,t,n){return function(){var r=Object(v.a)(g.a.mark((function r(a){var c;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,F(e.id,t,n);case 2:c=r.sent,O(c)(a),a({type:"CAR_UPDATED",car:e});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Me=function(e,t){return function(){var n=Object(v.a)(g.a.mark((function n(r,a){var c,o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Object(_e.c)(a()),o=c.filter((function(t){return t!==e})),n.next=4,J(e.id,t);case 4:r({type:"CARS_UPDATED",cars:o});case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},We=n(243),Ve=n(244),qe=n(234),Fe=Object(l.a)(Object(ae.a)({root:{backgroundColor:"#BDBDBD",borderRadius:"50%",color:"#fff",width:function(e){return e.size},height:function(e){return e.size},textTransform:"uppercase",fontFamily:"sans-serif",fontSize:function(e){return e.fontSize}}})),Je=function(e){var t=e.content,n=e.className,r=e.size,a=void 0===r?40:r,c=e.fontSize,i=Fe({size:a,fontSize:void 0===c?18:c});return Object(te.jsx)(o.a,{className:Object(ce.a)(i.root,n),display:"flex",justifyContent:"center",alignItems:"center",children:t})},He=Object(l.a)((function(e){return Object(ae.a)({input:{backgroundColor:ke.a[200],borderRadius:25,"& input:valid:focus":{borderRadius:25,backgroundColor:ke.a[300]},"& input::placeholder":{color:ke.a[900],fontSize:14},"& input:valid + fieldset":{borderRadius:25,borderWidth:0,color:"blue"},"& input:valid:focus + fieldset":{border:"none",padding:"4px !important"}},form:{flex:1},button:{display:"none"},avatar:{height:55,width:55,marginTop:5,marginRight:e.spacing(2)}})})),Ze=function(e){var t=e.onSave,n=e.defaultValue,r=e.className,a=e.user,c=He(),i=Object(se.a)(),s=i.register,u=i.handleSubmit,l=i.reset,d=i.formState.errors;return Object(te.jsxs)(o.a,{display:"flex",alignItems:"center",className:r,children:[Object(te.jsx)(Je,{content:I(a),className:c.avatar}),Object(te.jsxs)("form",{onSubmit:u((function(e){t(e),l(e)})),className:c.form,children:[Object(te.jsx)(xe,{register:s,errors:d,name:"text",rootClassName:c.input,defaultValue:n,placeholder:"Ecrivez un commentaire..."}),Object(te.jsx)("input",{type:"submit",className:c.button})]})]})},$e=Object(l.a)((function(e){return Object(ae.a)({button:{textTransform:"initial",fontWeight:400,color:e.palette.primary.main,padding:0,"&:hover":{backgroundColor:"transparent",opacity:.9}},firstButton:{marginRight:e.spacing(1)},form:{paddingLeft:e.spacing(8.8)}})})),Ke=function(e){var t=e.comment,n=e.car,r=$e(),a=Object(c.useState)(!1),i=Object(R.a)(a,2),s=i[0],u=i[1],l=Object(b.d)(),d=Object(b.f)(),j=Object(c.useCallback)((function(){return u((function(e){return!e}))}),[u]),p=Object(c.useCallback)((function(e){Me(n,e)(l,d.getState)}),[n,d,l]),f=Object(c.useCallback)((function(e){Pe(n,t._id,e)(l),j()}),[t,j]);return Object(te.jsxs)(o.a,{mt:-3,mb:1,children:[Object(te.jsxs)(o.a,{display:"flex",justifyContent:"flex-end",children:[Object(te.jsx)(le.a,{onClick:function(){return p(t._id)},className:Object(ce.a)(r.button,r.firstButton),children:"Supprimer"}),Object(te.jsx)(le.a,{onClick:j,className:r.button,children:"Modifier"})]}),s&&Object(te.jsx)(Ze,{onSave:f,defaultValue:t.text,className:r.form,user:t.postedBy})]})},Qe=n(240),Xe=n(241),Ye=n(242),et=Object(l.a)(Object(ae.a)({inline:{display:"inline"}})),tt=function(e){var t,n=e.comment,r=et();return Object(te.jsxs)(Qe.a,{alignItems:"flex-start",children:[Object(te.jsx)(Xe.a,{children:Object(te.jsx)(Je,{content:I(n.postedBy)})}),Object(te.jsx)(Ye.a,{primary:Object(te.jsxs)(o.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(te.jsx)(d.a,{variant:"subtitle1",className:r.inline,color:"textPrimary",children:n.postedBy.name}),Object(te.jsx)(d.a,{component:"span",variant:"body2",className:r.inline,color:"textPrimary",children:(t=n.updatedAt,D()(t).fromNow())})]}),secondary:n.text})]},n._id)},nt=function(){return Object(te.jsx)(o.a,{pl:1,children:Object(te.jsx)(ie,{content:"Connectez-vous",textAfter:"pour pouvoir commenter cet article",href:"/login"})})},rt=Object(l.a)((function(e){return Object(ae.a)({root:{width:"100%",backgroundColor:e.palette.background.paper,paddingBottom:0,paddingTop:e.spacing(1),borderTop:"1px solid "+ke.a[300]},button:{textTransform:"initial",fontWeight:400,color:e.palette.primary.main,padding:0,"&:hover":{backgroundColor:"transparent",opacity:.9}},firstButton:{marginRight:e.spacing(1)}})})),at=function(e){var t=e.comments,n=e.onAdd,a=e.car,o=rt(),i=Object(b.e)(y.b);return Object(te.jsxs)(qe.a,{className:o.root,subheader:Object(te.jsxs)(We.a,{component:"div",id:"nested-list-subheader",children:["Commentaires (",(null===t||void 0===t?void 0:t.length)||0,")"]}),children:[i?Object(te.jsx)(Ze,{onSave:n,user:i}):Object(te.jsx)(nt,{}),t&&t.length>0&&t.map((function(e,n){return Object(te.jsxs)(c.Fragment,{children:[Object(te.jsx)(tt,{comment:e}),((null===i||void 0===i?void 0:i.id)===e.postedBy.id||(o=i,o.roles.includes(r.admin)))&&Object(te.jsx)(Ke,{comment:e,car:a}),t.length-1!==n&&Object(te.jsx)(Ve.a,{variant:"inset",component:"li"})]},e._id);var o}))]})},ct=Object(l.a)((function(e){return{root:{width:600,borderRadius:10},media:{height:260},comment:{borderRadius:6},tag:{paddingLeft:e.spacing(5),borderColor:ke.a[500]}}})),ot=function(e){var t=e.car,n=e.className,r=ct(),a=Object(c.useState)(!1),i=Object(R.a)(a,2),l=i[0],j=i[1],p=Object(b.d)();return Object(te.jsxs)(s.a,{className:Object(ce.a)(r.root,n),children:[Object(te.jsx)(Ge.a,{className:r.media,image:t.image,title:"Contemplative Reptile"}),Object(te.jsxs)(u.a,{style:{paddingBottom:10},children:[Object(te.jsxs)(o.a,{display:"flex",justifyContent:"space-between",children:[Object(te.jsxs)(o.a,{children:[Object(te.jsx)(d.a,{gutterBottom:!0,variant:"h6",component:"h6",children:t.name}),Object(te.jsx)(d.a,{variant:"body2",color:"textSecondary",component:"p",children:t.shortDesc})]}),Object(te.jsx)(o.a,{className:r.comment,display:"flex",alignItems:"flex-start",children:Object(te.jsxs)(le.a,{size:"small",color:"primary",onClick:function(){return j((function(e){return!e}))},children:["Commentaires (",t.comments?t.comments.length:0,")"]})})]}),Object(te.jsx)(o.a,{display:"flex",justifyContent:"space-between",mt:2,children:[t.year,t.distance,t.fuel,t.gearbox].map((function(e,t){return Object(te.jsx)(o.a,{borderLeft:0!==t?1:0,className:0!==t?r.tag:void 0,children:Object(te.jsx)(d.a,{children:e})},t)}))})]}),l&&Object(te.jsx)(we.a,{children:Object(te.jsx)(at,{car:t,comments:t.comments,onAdd:function(e){p(function(e,t){return T(function(){var n=Object(v.a)(g.a.mark((function n(r,a){var c,o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Object(_e.c)(a()),n.next=3,q(e,t);case 3:o=n.sent,r({type:"CAR_LOADED",car:o}),r({type:"CARS_UPDATED",cars:[o].concat(Object(Ie.a)(c))});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}(t.id,e))}})})]})},it=Object(l.a)((function(e){return{cars:{margin:-e.spacing(10)},car:{margin:e.spacing(10)}}})),st=function(){var e=it(),t=Ue();return Object(te.jsx)(o.a,{children:Object(te.jsx)(o.a,{className:e.cars,children:t.map((function(t,n){return Object(te.jsx)(ot,{car:t,className:e.car},n)}))})})},ut=function(){return Object(te.jsx)(o.a,{display:"flex",justifyContent:"center",children:Object(te.jsx)(st,{})})},lt=function(){var e=Object(b.f)();return Object(c.useEffect)((function(){(function(){var t=Object(v.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:n=e.sent,O(n)(t),t({type:"LOGOUT_SUCCESS"}),localStorage.removeItem("token-zm6Jt8h9LBq9fhGb"),t(Q());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())(e.dispatch,e.getState);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),null},dt=n(90),bt=n(261),jt=n(252),pt=n(260),ft=n(246),mt=n(247),Ot=n(248),ht=n(259),xt=n(18),gt=n(249),vt=n(133),yt=n.n(vt),Ct=n(132),St=n.n(Ct),wt=Object(l.a)((function(e){return Object(ae.a)({root:{composes:"stretchSelf"},appBar:{backgroundColor:"#fff",color:"#000",paddingTop:e.spacing(.8),paddingBottom:e.spacing(.8),boxShadow:"0 12px 24px 0 rgb(0 0 0 / 8%)"},logoContainer:Object(Se.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),logo:{textDecoration:"none"},search:Object(Se.a)({position:"relative",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),borderRadius:e.shape.borderRadius,backgroundColor:Object(xt.c)(e.palette.secondary.main,1),"&:hover":{backgroundColor:Object(xt.c)(e.palette.secondary.main,.75)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",top:-1.6},inputRoot:{color:"inherit"},inputInput:Object(Se.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"18ch","&:focus":{width:"24ch"}}),loginButton:{color:"#fff",textDecoration:"none",backgroundColor:e.palette.primary.main,fontSize:16,padding:"".concat(e.spacing(1.2),"px ").concat(e.spacing(2.5),"px"),marginLeft:e.spacing(4),marginRight:e.spacing(2),borderRadius:8,"&:hover":{color:e.palette.primary.main,backgroundColor:"#fff"}},avatarLink:{textDecoration:"none","&:hover":{textDecoration:"none"}},avatar:{marginLeft:e.spacing(3),"&:hover":{opactity:.8}}})})),Nt=function(){var e=wt(),t=Object(b.d)(),n=Object(ft.a)(),r=Object(b.e)(y.b);return Object(te.jsx)("div",{className:e.root,children:Object(te.jsx)(mt.a,{appear:!1,direction:"down",in:!n,children:Object(te.jsx)(Ot.a,{className:e.appBar,children:Object(te.jsxs)(gt.a,{children:[Object(te.jsx)(ie,{content:"My Car",href:"/",className:e.logo,rootClassName:e.logoContainer}),Object(te.jsxs)("div",{className:e.search,children:[Object(te.jsx)("div",{className:e.searchIcon,children:Object(te.jsx)(St.a,{})}),Object(te.jsx)(ht.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})]}),r?Object(te.jsx)(ie,{href:"/logout",className:e.avatarLink,children:Object(te.jsx)(Je,{content:I(r),className:e.avatar,size:35})}):Object(te.jsx)(be,{onClick:function(){t(Q())},text:"Connexion",className:e.loginButton,startIcon:Object(te.jsx)(yt.a,{})})]})})})})},kt=n(251),Et=n(250),Rt=n(134),At=n.n(Rt),Dt=n(138),Lt=n.n(Dt),Tt=n(136),Bt=n.n(Tt),It=n(137),_t=n.n(It),zt=n(135),Ut=n.n(zt),Gt=Object(l.a)({success:{backgroundColor:"#1FA086"},error:{backgroundColor:"#fd6664"},info:{backgroundColor:"#00bcd4"},warning:{backgroundColor:"#d17d1d"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:20},message:{display:"flex",alignItems:"center"}}),Pt={success:At.a,warning:Ut.a,error:Bt.a,info:_t.a},Mt=function(e){var t=e.className,n=e.onClose,r=e.variant,a=e.message,c=Object(dt.a)(e,["className","onClose","variant","message"]),o=Gt(),i=Pt[r];return Object(te.jsx)(Et.a,Object(ue.a)({className:Object(ce.a)(o[r],t),"aria-describedby":"client-snackbar",message:Object(te.jsxs)("span",{id:"client-snackbar",className:o.message,children:[Object(te.jsx)(i,{className:Object(ce.a)(o.icon,o.iconVariant)}),a]}),action:n?[Object(te.jsx)(kt.a,{"aria-label":"Close",color:"inherit",onClick:n,children:Object(te.jsx)(Lt.a,{className:o.icon})},"close")]:void 0},c))},Wt=Object(l.a)((function(e){return{main:{composes:"flexColumn"},children:{composes:"flexCenter flex1",padding:12},backdrop:{zIndex:10*e.zIndex.drawer,color:"#fff"},menuButton:{"&:hover":{backgroundColor:"transparent"}},content:{composes:"flexRow center flexCenter flex1 stretchSelf",backgroundColor:e.palette.secondary.main,paddingTop:e.spacing(8),marginTop:77,flexGrow:1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}})),Vt=function(e){var t=e.children,n=Object(c.useState)(!1),r=Object(R.a)(n,2),a=r[0],o=r[1],i=Wt(),s=Object(b.d)(),u=Object(b.e)(y.g),l=Object(b.e)(y.e),d=Object(b.e)(y.f),j=Object(b.e)(y.d);return Object(c.useEffect)((function(){return setTimeout((function(){o(j)}),200),function(){o(!1)}}),[j]),Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ne,{title:u||C}),Object(te.jsxs)("main",{className:i.main,children:[Object(te.jsx)(Nt,{}),Object(te.jsx)("div",{className:i.content,children:t})]}),Object(te.jsx)(pt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:null!=l,autoHideDuration:4e3,onClose:function(){return s({type:"CLOSE_MESSAGE"})},children:Object(te.jsx)(Mt,{variant:d,message:l||""})}),Object(te.jsx)(bt.a,{className:i.backdrop,open:a,onClick:function(){o(!1)},children:Object(te.jsx)(jt.a,{color:"inherit"})})]})},qt=function(e){var t=e.component,n=Object(dt.a)(e,["component"]);return function(){var e=Object(b.f)(),t=Object(b.e)(y.b);Object(c.useEffect)((function(){var n=X();!t&&n&&Y()(e.dispatch,e.getState)}),[e,X])}(),Object(te.jsx)(a.a,Object(ue.a)(Object(ue.a)({},n),{},{children:Object(te.jsx)(Vt,{children:Object(te.jsx)(t,{})})}))};t.default=function(){return Object(te.jsxs)(a.c,{children:[Object(te.jsx)(qt,{path:"/",component:ut,exact:!0}),Object(te.jsx)(qt,{path:"/profil",component:Be}),Object(te.jsx)(a.a,{path:k,exact:!0,children:Object(te.jsx)(Ce,{})}),Object(te.jsx)(a.a,{path:E,exact:!0,children:Object(te.jsx)(Ce,{})}),Object(te.jsx)(a.a,{path:"/logout",component:lt})]})}},189:function(e,t,n){"use strict";n.r(t);var r=n(227),a=n(257),c=n(253),o=n(46),i=n(17),s=n(140),u=n(14),l=n.n(u),d=n(83),b=n(10),j=n(27),p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},f=n(111),m=n(67),O=n(126),h=n(127),x=[Object(f.a)(j.c),h.a],g=[m.applyMiddleware.apply(void 0,x)],v=O.composeWithDevTools.apply(void 0,g),y=Object(m.createStore)(j.a,{},v);var C=n(92),S=n(139),w=Object(S.a)({palette:{primary:{main:C.a[600]},secondary:{main:"#ECECEC"},error:{main:"#ff485e"}}}),N=(n(163),n(2));!function(){var e=window.location.hostname;window.LOCAL=-1===e.indexOf("my-car");var t=n(187).default,u=document.getElementById("root"),p=Object(i.b)(Object(s.a)()),f=Object(r.a)();u&&l.a.render(Object(N.jsx)(b.a,{store:y,children:Object(N.jsx)(d.b,{children:Object(N.jsx)(a.b,{jss:p,generateClassName:f,children:Object(N.jsx)(c.a,{theme:w,children:Object(N.jsx)(o.a,{history:j.c,children:Object(N.jsx)(t,{})})})})})}),document.getElementById("root"))}(),p()},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return d}));var r=n(8),a=n(27),c={user:null,loading:!1,error:null,variant:null,message:null,title:null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.user",t&&"No current user in app")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.error",t&&"No error in app")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.message",t&&"No message in app")},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.loading",t&&"No action with loader in app")},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.title",t&&"No title in app")},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"app.variant",t&&"No message in app")};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_START":return Object(r.a)(Object(r.a)({},e),{},{loading:!0});case"LOADING_END":return Object(r.a)(Object(r.a)({},e),{},{loading:!1});case"LOGIN_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{user:t.user});case"LOGOUT_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{user:null});case"ERROR":return Object(r.a)(Object(r.a)({},e),{},{error:t.message});case"CLOSE_ERROR":return Object(r.a)(Object(r.a)({},e),{},{error:null});case"MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{message:t.message,variant:t.variant||"info"});case"CLOSE_MESSAGE":return Object(r.a)(Object(r.a)({},e),{},{message:null});default:return e}}},27:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return f}));var r,a=n(8),c=n(46),o=n(45),i=n(67),s=n(19),u=n(35),l={user:null,users:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADED":return Object(a.a)(Object(a.a)({},e),{},{user:t.user});case"REMOVE_USER":return Object(a.a)(Object(a.a)({},e),{},{user:null});case"USER_UPDATED":return Object(a.a)(Object(a.a)({},e),{},{user:t.user});case"USERS_LOADED":case"USERS_UPDATED":return Object(a.a)(Object(a.a)({},e),{},{users:t.users});default:return e}},b=Object(o.a)(),j={app:s.a,cars:u.a,users:d},p=(r=b,Object(i.combineReducers)(Object(a.a)(Object(a.a)({},j),{},{router:Object(c.b)(r)}))),f=(t.a=p,function(e,t,n){var r;try{if("function"===typeof e)throw new Error("The state parameter must not be a function. The error is usually the usage of getState instead of getState(). Path is");if(r=t.split(".").reduce((function(e,t){return e[t]}),e),n&&null==r)throw new Error(n)}catch(a){return console.error(a),null}return r})},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=n(8),a=n(27),c={car:null,cars:[],count:null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"cars.car",t&&"No car data found")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a.b)(e,"cars.cars",t&&"No cars data found")};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CAR_LOADED":return Object(r.a)(Object(r.a)({},e),{},{car:t.car});case"REMOVE_CAR":return Object(r.a)(Object(r.a)({},e),{},{car:null});case"CAR_UPDATED":return Object(r.a)(Object(r.a)({},e),{},{car:t.car});case"CARS_LOADED":return Object(r.a)(Object(r.a)({},e),{},{cars:t.cars,count:t.count});case"CARS_UPDATED":return Object(r.a)(Object(r.a)({},e),{},{cars:t.cars});default:return e}}}},[[189,1,2]]]);
//# sourceMappingURL=main.374ffdea.chunk.js.map